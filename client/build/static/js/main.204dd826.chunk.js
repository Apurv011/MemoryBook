(this.webpackJsonplogin=this.webpackJsonplogin||[]).push([[0],{16:function(e,t,a){e.exports={landingPage:"LandingPage_landingPage__2DBba",landingPageTitle:"LandingPage_landingPageTitle__1-2CK",landingPageSubTitle:"LandingPage_landingPageSubTitle__1dNhu",subTitle:"LandingPage_subTitle__vSXDE",landingPageCard:"LandingPage_landingPageCard__3-kD_"}},18:function(e,t,a){e.exports={heading:"LoginSignupForm_heading__2lnM6",loginSignupCard:"LoginSignupForm_loginSignupCard__3gY7-"}},19:function(e,t,a){e.exports={singleCard:"SingleMemory_singleCard__11tw2",cardImg:"SingleMemory_cardImg__25SGr",likeBtn:"SingleMemory_likeBtn__UCuFN"}},26:function(e,t,a){e.exports={userCardImg:"User_userCardImg__lp189",userCard:"User_userCard__20r1u",bio:"User_bio__2DV7a"}},31:function(e,t,a){e.exports={header:"Header_header__3Kbo6",title:"Header_title__2ggyc"}},32:function(e,t,a){e.exports={createArea:"CreateArea_createArea__1wO38",createNoteBtn:"CreateArea_createNoteBtn__2edSW"}},33:function(e,t,a){e.exports={completeMemory:"FullMemory_completeMemory__KKi9d",completeMemoryImg:"FullMemory_completeMemoryImg__2f7jr"}},46:function(e,t,a){e.exports={userName:"Memories_userName__23R4u"}},50:function(e,t,a){e.exports={singleDayCard:"SingleDay_singleDayCard__mvJmI"}},83:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(23),s=a.n(c),o=a(3),l=a(6),r=a(4),i=a(5),d=a.n(i),u=a(7),j=a(8),m=a(18),b=a.n(m),h=a(0);var O=function(e){var t=Object(u.e)(),a=Object(n.useState)(""),c=Object(o.a)(a,2),s=c[0],i=c[1],m=Object(n.useState)(""),O=Object(o.a)(m,2),g=O[0],p=O[1],x=Object(n.useState)(""),f=Object(o.a)(x,2),v=f[0],N=f[1],y=Object(n.useState)(""),_=Object(o.a)(y,2),S=_[0],k=_[1],C=Object(n.useState)(""),I=Object(o.a)(C,2),D=I[0],w=I[1],M=Object(n.useState)({username:"",email:"",password:""}),T=Object(o.a)(M,2),P=T[0],A=T[1];function z(e){var t=e.target,a=t.name,n=t.value;A((function(e){return Object(r.a)(Object(r.a)({},e),{},Object(l.a)({},a,n))}))}return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{className:b.a.heading,children:"Sign Up"}),Object(h.jsxs)("form",{className:"".concat(b.a.loginSignupCard," form-container"),children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:Object(h.jsx)("b",{children:"Username"})}),Object(h.jsx)("input",{onChange:z,type:"text",class:"form-control",name:"username",value:P.username}),Object(h.jsx)("p",{style:{color:"#ff0000",fontSize:"12px"},children:Object(h.jsx)("b",{children:s})})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:Object(h.jsx)("b",{children:"Email address"})}),Object(h.jsx)("input",{onChange:z,type:"email",className:"form-control",name:"email",value:P.email,"aria-describedby":"emailHelp"}),Object(h.jsx)("p",{style:{color:"#ff0000",fontSize:"12px"},children:Object(h.jsx)("b",{children:g})})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:Object(h.jsx)("b",{children:"Password"})}),Object(h.jsx)("input",{onChange:z,type:"password",className:"form-control",name:"password",value:P.password}),Object(h.jsx)("p",{style:{color:"#ff0000",fontSize:"12px"},children:Object(h.jsx)("b",{children:v})})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:Object(h.jsx)("b",{children:"Confirm Password"})}),Object(h.jsx)("input",{type:"password",onChange:function(e){w(e.target.value)},className:"form-control",value:D}),Object(h.jsx)("p",{style:{color:"#ff0000",fontSize:"12px"},children:Object(h.jsx)("b",{children:S})})]}),Object(h.jsx)("button",{type:"submit",onClick:function(e){(function(){var e=!0;return""===P.username&&(i("Enter Username"),e=!1),P.email.match(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/)||(p("Enter a valid email"),e=!1),P.password.length<6&&(N("Password length should be more than 5"),e=!1),P.password!==D&&(k("Passwod is not matching"),e=!1),e})()&&(d.a.post("".concat("http://localhost:5000/","user/signup"),P).then((function(e){t.push("/login")})),A({username:"",email:"",password:""})),e.preventDefault()},className:"btn btn-outline-dark",children:"Sign-Up"})]}),Object(h.jsx)(j.b,{to:"/login",children:Object(h.jsx)("h1",{id:"emailHelp",className:"small-text",style:{color:"#161616"},children:"Already have an Accout? Click here to Log-In"})})]})};var g=function(e){var t=Object(u.e)(),a=Object(n.useState)({email:"",password:"",token:""}),c=Object(o.a)(a,2),s=c[0],i=c[1];function m(e){var t=e.target,a=t.name,n=t.value;i((function(e){return Object(r.a)(Object(r.a)({},e),{},Object(l.a)({},a,n))}))}return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{className:b.a.heading,children:"Log In"}),Object(h.jsxs)("form",{className:"".concat(b.a.loginSignupCard," form-container"),children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:Object(h.jsx)("b",{children:"Email address"})}),Object(h.jsx)("input",{onChange:m,type:"email",name:"email",value:s.email,className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp"}),Object(h.jsx)("small",{id:"emailHelp",className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{children:Object(h.jsx)("b",{children:"Password"})}),Object(h.jsx)("input",{onChange:m,name:"password",value:s.password,type:"password",className:"form-control",id:"exampleInputPassword1"})]}),Object(h.jsx)("button",{type:"submit",onClick:function(a){d.a.post("".concat("http://localhost:5000/","user/login"),s).then((function(a){"Auth Successful!"===a.data.message?(console.log(a.data),localStorage.clear(),localStorage.setItem("userData",JSON.stringify(a.data)),e.getUser(a.data.user._id,a.data.user.username,a.data.token),t.push("/memories")):console.log(a.data)})),i({email:"",password:"",token:""}),a.preventDefault()},className:"btn btn-outline-dark",children:"Log In"})]}),Object(h.jsx)(j.b,{to:"/signup",children:Object(h.jsx)("p",{id:"emailHelp",className:"small-text",style:{color:"#161616"},children:"Don't have an account? Click here to create!"})})]})},p=a(31),x=a.n(p);var f=function(e){var t=Object(u.e)();function a(){t.push("/memories")}return Object(h.jsxs)("nav",{className:"".concat(x.a.header," navbar navbar-light navbar-expand-lg"),children:[Object(h.jsx)("h3",{className:x.a.title,children:"Memory-Book"}),Object(h.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(h.jsx)("span",{className:"navbar-toggler-icon"})}),Object(h.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",style:{marginLeft:"60px"},children:Object(h.jsxs)("ul",{className:"navbar-nav ml-auto",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("button",{className:"nav-link btn btn-link",onClick:"My Memories"===e.hOption?function(){t.push({pathname:"/myMemories",state:{favs:[],isFav:!1}})}:a,children:e.hOption})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("button",{className:"nav-link btn btn-link",onClick:"My Diary"===e.hOption2?function(){t.push("/myDiary")}:a,children:e.hOption2})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("button",{className:"nav-link btn btn-link",onClick:"My Profile"===e.hOption3?function(){t.push({pathname:"/user",state:{authorId:e.uID}})}:a,children:e.hOption3})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("button",{style:e.isAuthor?{visibility:"hidden"}:{visibility:"visible"},className:"nav-link btn btn-link",onClick:"Favorites"===e.hOptionFav?function(){t.push({pathname:"/myMemories",state:{favs:e.favorites,isFav:!0}})}:a,children:e.hOptionFav})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("button",{className:"nav-link btn btn-link",onClick:function(){localStorage.clear(),t.push("/LandingPage")},children:"Logout"})})]})})]})},v=a(25),N=a.n(v),y=a(19),_=a.n(y),S=a(44),k=a.n(S),C=a(45),I=a.n(C);var D=function(e){var t=Object(u.e)(),a=e.author,c=Object(n.useState)(!1),s=Object(o.a)(c,2),l=s[0],i=s[1],m=Object(n.useState)([]),b=Object(o.a)(m,2),O=b[0],g=b[1],p=Object(n.useState)({favs:[]}),x=Object(o.a)(p,2),f=x[0],v=x[1];function y(){var a=localStorage.getItem("userData");if(l){if(a){var n=JSON.parse(a),c={headers:{Authorization:"Bearer "+n.token}},s=O.indexOf(e.id);s>-1&&O.splice(s,1),console.log("List "+O.length),v((function(e){return Object(r.a)(Object(r.a)({},e),{},{favs:O})})),d.a.patch("".concat("http://localhost:5000/","user/").concat(n.user._id),f,c).then((function(e){console.log(e.data),d.a.get("".concat("http://localhost:5000/","user/").concat(n.user._id),c).then((function(e){g(null!==e.data.user.favs?e.data.user.favs:[]),v((function(t){return Object(r.a)(Object(r.a)({},t),{},{favs:null!==e.data.user.favs?e.data.user.favs:[]})})),i(!1)})).catch((function(e){t.push("/login")}))}))}}else if(a){var o=JSON.parse(a),u={headers:{Authorization:"Bearer "+o.token}};O.push(e.id),v((function(e){return Object(r.a)(Object(r.a)({},e),{},{favs:O})})),d.a.patch("".concat("http://localhost:5000/","user/").concat(o.user._id),f,u).then((function(e){console.log(e.data),d.a.get("".concat("http://localhost:5000/","user/").concat(o.user._id),u).then((function(e){g(null!==e.data.user.favs?e.data.user.favs:[]),v((function(t){return Object(r.a)(Object(r.a)({},t),{},{favs:null!==e.data.user.favs?e.data.user.favs:[]})})),i(!l)})).catch((function(e){t.push("/login")}))}))}}return Object(n.useEffect)((function(){var a=localStorage.getItem("userData");if(a){var n=JSON.parse(a),c={headers:{Authorization:"Bearer "+n.token}};d.a.get("".concat("http://localhost:5000/","user/").concat(n.user._id),c).then((function(t){g(null!==t.data.user.favs?t.data.user.favs:[]),O.includes(e.id)?i(!0):i(!1),v((function(e){return Object(r.a)(Object(r.a)({},e),{},{favs:null!==t.data.user.favs?t.data.user.favs:[]})}))}))}else t.push("/login")}),[O,t,e.id]),Object(h.jsx)("div",{children:Object(h.jsx)(N.a,{left:!0,children:Object(h.jsxs)("div",{className:_.a.singleCard,children:[Object(h.jsx)("img",{src:"http://localhost:5000/"+e.image,className:_.a.cardImg,alt:"..."}),Object(h.jsx)("h5",{style:{margin:"7px"},children:e.title}),Object(h.jsx)(j.b,{className:"nav-link nav-item",style:{marginBottom:"7px",color:"#000000"},to:{pathname:"/user",state:{authorId:e.uID}},children:"Delete"===e.btnTitle?"":"Author: "+a}),Object(h.jsx)("button",{className:"btn btn-outline-dark",style:{marginLeft:"5px"},onClick:function(){t.push({pathname:"/fullMemory",state:{memoryId:e.id}})},children:"Read More"}),"Deletetrue"!==e.btnTitle&&!e.isFav&&(l?Object(h.jsx)(k.a,{fontSize:"large",className:"".concat(_.a.likeBtn),onClick:y}):Object(h.jsx)(I.a,{fontSize:"large",className:"".concat(_.a.likeBtn),onClick:y})),Object(h.jsx)("button",{style:"Deletetrue"===e.btnTitle?{visibility:"visible",margin:"16px"}:{visibility:"hidden"},className:"btn btn-outline-dark",onClick:function(){e.onDelete(e.id)},children:"Delete"})]})})})},w=a(32),M=a.n(w);var T=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)({title:"",content:"",user_id:"",author_name:"",date:"",image:""}),u=Object(o.a)(i,2),j=u[0],m=u[1],b=Object(n.useState)({title:"",content:"",user_id:"",date:""}),O=Object(o.a)(b,2),g=O[0],p=O[1];function x(){var e=new Date,t=("0"+e.getDate()).slice(-2);return t=t+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+e.getFullYear()}var f={headers:{Authorization:"Bearer "+e.uToken}};function v(t){var a=t.target,n=a.name,c=a.value;m((function(t){var a;return Object(r.a)(Object(r.a)({},t),{},(a={},Object(l.a)(a,n,c),Object(l.a)(a,"user_id",e.userId),Object(l.a)(a,"author_name",e.userName),Object(l.a)(a,"date",x()),a))}))}function N(t){var a=t.target,n=a.name,c=a.value;p((function(t){var a;return Object(r.a)(Object(r.a)({},t),{},(a={},Object(l.a)(a,n,c),Object(l.a)(a,"user_id",e.userId),Object(l.a)(a,"date",x()),a))}))}return Object(h.jsx)("div",{children:Object(h.jsxs)("form",{className:"".concat(M.a.createArea," col-md-7 col-sm-12"),children:[c&&Object(h.jsx)("input",{onChange:e.isImg?v:N,name:"title",placeholder:"Title",value:e.isImg?j.title:g.title}),Object(h.jsx)("textarea",{name:"content",onClick:function(){s(!0)},onChange:e.isImg?v:N,value:e.isImg?j.content:g.content,placeholder:"Write here...",rows:!0===c?6:1}),e.isImg&&c&&Object(h.jsx)("input",{type:"file",multiple:!0,name:"image",onChange:function(t){var a=t.target,n=a.name,c=a.value;m((function(a){var s;return Object(r.a)(Object(r.a)({},a),{},(s={},Object(l.a)(s,n,c),Object(l.a)(s,"user_id",e.userId),Object(l.a)(s,"author_name",e.userName),Object(l.a)(s,"date",x()),Object(l.a)(s,"image",t.target.files[0]),s))}))}}),Object(h.jsx)("button",{className:"".concat(M.a.createNoteBtn),onClick:e.isImg?function(e){var t=new FormData;t.append("title",j.title),t.append("content",j.content),t.append("user_id",j.user_id),t.append("date",j.date),t.append("author_name",j.author_name),t.append("image",j.image),d.a.post("".concat("http://localhost:5000/","memory/creatememory"),t,f).then((function(e){console.log(e.data)})),m({title:"",content:"",user_id:"",author_name:"",date:"",image:""}),e.preventDefault()}:function(e){d.a.post("".concat("http://localhost:5000/","diary/createday"),g,f).then((function(e){console.log(e.data)})),p({title:"",content:"",user_id:"",date:""}),e.preventDefault()},children:"Add"})]})})},P=a(46),A=a.n(P);var z=function(e){var t=Object(u.e)();console.log("aaa");var a=Object(n.useState)([]),c=Object(o.a)(a,2),s=c[0],l=c[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("userData");if(e){var a={headers:{Authorization:"Bearer "+JSON.parse(e).token}};d.a.get("http://localhost:5000/memory/allmemories",a).then((function(e){console.log(e.data.memories),l(e.data.memories)})).catch((function(e){t.push("/login")}))}else t.push("/login")})),Object(h.jsxs)("div",{children:[Object(h.jsx)(f,{uID:e.uID,hOption:"My Memories",hOption2:"My Diary",hOption3:"My Profile"}),Object(h.jsxs)("h2",{className:A.a.userName,children:["Hello, ",e.uName," "]}),Object(h.jsx)(T,{userId:e.uID,userName:e.uName,uToken:e.uToken,isImg:!0}),s.slice(0).reverse().map((function(e,t){return Object(h.jsx)(D,{id:e._id,uID:e.user_id,title:e.title,btnTitle:"Read More",content:e.content,author:e.author_name,date:e.date,image:e.image},t)}))]})},B=a(47),F=a.n(B);var L=function(e){return Object(h.jsxs)("div",{className:"mt-2",children:[Object(h.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[Object(h.jsx)("h5",{className:"mr-2",children:e.commenter}),Object(h.jsx)("span",{class:"mb-1 ml-2",children:e.date})]}),Object(h.jsx)("div",{children:Object(h.jsx)("span",{children:e.comment})}),Object(h.jsx)("hr",{})]})},J=a(49),E=a.n(J),U=a(48),H=a.n(U),R=a(33),W=a.n(R);var Y=function(){var e=Object(u.e)(),t=Object(u.f)(),a=Object(n.useState)([]),c=Object(o.a)(a,2),s=c[0],i=c[1],j=Object(n.useState)(""),m=Object(o.a)(j,2),b=m[0],O=m[1],g=Object(n.useState)(""),p=Object(o.a)(g,2),x=p[0],v=p[1],N=Object(n.useState)(""),y=Object(o.a)(N,2),_=y[0],S=y[1],k=Object(n.useState)(""),C=Object(o.a)(k,2),I=C[0],D=C[1],w=Object(n.useState)(""),M=Object(o.a)(w,2),T=M[0],P=M[1],A=Object(n.useState)(""),z=Object(o.a)(A,2),B=z[0],J=z[1],U=Object(n.useState)(""),R=Object(o.a)(U,2),Y=R[0],K=R[1],$=Object(n.useState)(""),q=Object(o.a)($,2),G=q[0],V=q[1],X=Object(n.useState)(!1),Z=Object(o.a)(X,2),Q=Z[0],ee=Z[1],te=Object(n.useState)({comments:[]}),ae=Object(o.a)(te,2),ne=ae[0],ce=ae[1],se=Object(n.useState)({comment:"",commenter:"",date:""}),oe=Object(o.a)(se,2),le=oe[0],re=oe[1];return Object(n.useEffect)((function(){var a=localStorage.getItem("userData");if(a){var n=JSON.parse(a),c={headers:{Authorization:"Bearer "+n.token}};K(n.user._id),V(n.user.username),d.a.get("".concat("http://localhost:5000/","memory/").concat(t.state.memoryId),c).then((function(e){console.log(e.data),O(e.data.author_name),console.log(b),v(e.data.user_id),S(e.data.title),D(e.data.content),P(e.data.date),J(e.data.image),i(null!==e.data.comments?e.data.comments:[]),ce((function(t){return Object(r.a)(Object(r.a)({},t),{},{comments:null!==e.data.comments?e.data.comments:[]})}))})).catch((function(t){e.push("/login")}))}else e.push("/login")}),[Y,e,t,b]),Object(h.jsxs)("div",{children:[Object(h.jsx)(f,{hOption3:"Home"}),Object(h.jsx)(F.a,{left:!0,children:Object(h.jsxs)("div",{className:"".concat(W.a.completeMemory," col-md-9 col-sm-12"),children:[Object(h.jsx)("img",{className:"".concat(W.a.completeMemoryImg," col-md-9 col-sm-9"),src:""===B?"https://images.wallpapersden.com/image/download/small-memory_am1pa2aUmZqaraWkpJRobWllrWdma2U.jpg":"http://localhost:5000/"+B,alt:"..."}),Object(h.jsxs)("div",{style:{paddingLeft:"120px",paddingRight:"100px"},children:[Object(h.jsxs)("h1",{style:{marginTop:"35px"},children:[" ",_," "]}),Object(h.jsx)("p",{className:"text-muted",children:T}),Object(h.jsx)("button",{className:"btn",onClick:function(){e.push({pathname:"/user",state:{authorId:x}})},children:Object(h.jsxs)("strong",{children:["Author: ",b]})}),Object(h.jsx)("br",{}),Object(h.jsxs)("p",{children:[" ",I," "]})]}),Object(h.jsxs)("div",{className:"p-2 px-4 col-md-10 col-sm-9",style:{margin:"0px auto"},children:[Object(h.jsxs)("div",{className:"d-flex flex-row mt-4 mb-4",children:[Object(h.jsx)("textarea",{rows:2,type:"text",className:"form-control ml-80 mr-3",onChange:function(e){var t=e.target,a=t.name,n=t.value;re((function(e){var t;return Object(r.a)(Object(r.a)({},e),{},(t={},Object(l.a)(t,a,n),Object(l.a)(t,"commenter",G),Object(l.a)(t,"date",function(){var e=new Date,t=("0"+e.getDate()).slice(-2);return t+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+e.getFullYear()}()),t))}))},name:"comment",value:le.comment,placeholder:"Add comment"}),Object(h.jsx)("button",{className:"btn btn-outline-primary",type:"button",onClick:function(a){var n=localStorage.getItem("userData");if(n){var c={headers:{Authorization:"Bearer "+JSON.parse(n).token}};s.push(le),console.log("List "+s.length),ce((function(e){return Object(r.a)(Object(r.a)({},e),{},{comments:s})})),d.a.patch("".concat("http://localhost:5000/","memory/").concat(t.state.memoryId),ne,c).then((function(a){console.log(a.data),d.a.get("".concat("http://localhost:5000/","memory/").concat(t.state.memoryId),c).then((function(e){console.log(e.data),O(e.data.author_name),v(e.data.user_id),S(e.data.title),D(e.data.content),P(e.data.date),J(e.data.image),i(null!==e.data.comments?e.data.comments:[]),ce((function(t){return Object(r.a)(Object(r.a)({},t),{},{comments:null!==e.data.comments?e.data.comments:[]})}))})).catch((function(t){e.push("/login")}))})),re({comment:"",commenter:"",date:""}),alert("Comment added Successfully!"),a.preventDefault()}},children:"Comment"})]}),Object(h.jsxs)("div",{className:"collapsable-comment",children:[Object(h.jsx)("button",{onClick:function(){ee(!Q)},className:"btn","data-toggle":"collapse","aria-expanded":"false","aria-controls":"collapse-1",href:"#collapse-1",children:Object(h.jsxs)("p",{children:[Object(h.jsx)("span",{style:{color:"#000000"},children:Q?"Hide Comments":"All Comments"}),Q?Object(h.jsx)(E.a,{fontSize:"large",style:{color:"#000000"}}):Object(h.jsx)(H.a,{fontSize:"large",style:{color:"#000000"}})]})}),Object(h.jsx)("div",{id:"collapse-1",className:"collapse",children:0!==ne.comments.length?ne.comments.slice(0).reverse().map((function(e,t){return Object(h.jsx)(L,{comment:e.comment,commenter:e.commenter,date:e.date})})):"No Comments Yet :("})]})]})]})})]})};var K=function(e){var t=Object(u.e)(),a=Object(u.f)(),c=Object(n.useState)([]),s=Object(o.a)(c,2),l=s[0],r=s[1];function i(e){var t=localStorage.getItem("userData");if(t){var a={headers:{Authorization:"Bearer "+JSON.parse(t).token}};d.a.delete("".concat("http://localhost:5000/","memory/memories/delete/").concat(e),a).then((function(e){console.log(e)})),r((function(t){return l.filter((function(t,a){return a!==e}))}))}}return Object(n.useEffect)((function(){var n=localStorage.getItem("userData");if(n){var c={headers:{Authorization:"Bearer "+JSON.parse(n).token}};d.a.get("".concat("http://localhost:5000/","memory/allmemories/"),c).then((function(t){a.state.isFav?r((function(){return t.data.memories.filter((function(e){return a.state.favs.includes(e._id)}))})):r((function(){return t.data.memories.filter((function(t){return t.user_id===e.uID}))}))})).catch((function(e){console.log(e.response.status),t.push("/login")}))}else t.push("/login")}),[t,e.uID,l,a.state.isFav,a.state.favs]),Object(h.jsxs)("div",{children:[Object(h.jsx)(f,{hOption:"Home"}),Object(h.jsx)("div",{className:"row",style:{margin:"25px 50px"},children:l.slice(0).reverse().map((function(e,t){return Object(h.jsx)(D,{id:e._id,onDelete:i,title:e.title,isFav:!0,btnTitle:"Delete"+String(a.state.favs.length<=0),content:e.content,date:e.date,author:e.author_name,image:e.image},t)}))})]})},$=a(16),q=a.n($);var G=function(){var e=Object(u.e)();return Object(h.jsxs)("div",{className:"".concat(q.a.landingPage," row"),children:[Object(h.jsxs)("div",{className:"col-lg-4 col-md-6",children:[Object(h.jsx)("p",{className:q.a.landingPageTitle,children:Object(h.jsx)("strong",{children:" Memory Book "})}),Object(h.jsx)("p",{className:q.a.landingPageSubTitle,children:Object(h.jsx)("strong",{children:"\u275dA moment lasts all of a second, but the memory lives on forever.\u275e"})})]}),Object(h.jsx)("div",{className:"col-lg-8 col-md-6",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsxs)("div",{className:"".concat(q.a.landingPageCard," col-lg-5"),children:[Object(h.jsx)("p",{style:{marginTop:"52px"},className:q.a.subTitle,children:Object(h.jsx)("strong",{children:"Don't have an account?"})}),Object(h.jsx)("p",{className:q.a.subTitle,children:Object(h.jsx)("strong",{children:"Sign up now and join the world of Memories!"})}),Object(h.jsx)("button",{style:{marginTop:"45px"},type:"button",onClick:function(){e.push("/signup")},className:"btn btn-outline-dark btn-lg",children:"Sign Up"})]}),Object(h.jsxs)("div",{className:"".concat(q.a.landingPageCard," col-lg-5"),children:[Object(h.jsx)("p",{style:{marginTop:"55px"},className:q.a.subTitle,children:Object(h.jsx)("strong",{children:"Already have an account?"})}),Object(h.jsx)("p",{className:q.a.subTitle,children:Object(h.jsx)("strong",{children:"Logn In to the world of Memories!"})}),Object(h.jsx)("button",{style:{marginTop:"70px"},type:"button",onClick:function(){e.push("/login")},className:"btn btn-outline-dark btn-lg",children:"Log In"})]})]})})]})},V=a(26),X=a.n(V);var Z=function(){var e=Object(u.e)(),t=Object(u.f)(),a=Object(n.useState)({username:"",bio:"",interests:"",image:"",favs:[]}),c=Object(o.a)(a,2),s=c[0],i=c[1],j=Object(n.useState)([]),m=Object(o.a)(j,2),b=m[0],O=m[1],g=Object(n.useState)(""),p=Object(o.a)(g,2),x=p[0],v=p[1],N=Object(n.useState)(!1),y=Object(o.a)(N,2),_=y[0],S=y[1],k=localStorage.getItem("userData");function C(e){var t=e.target,a=t.name,n=t.value;i((function(e){return Object(r.a)(Object(r.a)({},e),{},Object(l.a)({},a,n))})),console.log(s.bio)}function I(){if(k){var e={headers:{Authorization:"Bearer "+JSON.parse(k).token}},t=new FormData;console.log(s.bio),t.append("username",s.username),t.append("bio",s.bio),t.append("interests",s.interests),t.append("image",s.image),d.a.patch("".concat("http://localhost:5000/","user/").concat(x),t,e).then((function(t){console.log(t.data),d.a.get("".concat("http://localhost:5000/","user/").concat(x),e).then((function(e){console.log(e.data.user),i((function(t){return{username:e.data.user.username,bio:e.data.user.bio,interests:e.data.user.interests,image:e.data.user.image}}))}))}))}}return Object(n.useEffect)((function(){var a=localStorage.getItem("userData");if(a){var n=JSON.parse(a),c={headers:{Authorization:"Bearer "+n.token}};t.state.authorId===n.user._id?(v(n.user._id),S(!1)):(v(t.state.authorId),S(!0)),d.a.get("".concat("http://localhost:5000/","memory/allmemories/"),c).then((function(e){console.log(e.data),O((function(){return e.data.memories.filter((function(e){return e.user_id===x}))}))})).catch((function(t){console.log(t.response.status),e.push("/login")})),d.a.get("".concat("http://localhost:5000/","user/").concat(x),c).then((function(e){console.log(e.data.user.bio),console.log(e.data.user.username),i((function(t){return Object(r.a)(Object(r.a)({},t),{},{username:e.data.user.username,bio:e.data.user.bio,interests:e.data.user.interests,favs:e.data.user.favs,image:e.data.user.image})}))}))}else e.push("/login")}),[x,e,t.state.authorId]),Object(h.jsxs)("div",{children:[Object(h.jsx)(f,{hOption3:"Home",hOptionFav:"Favorites",favorites:s.favs,isAuthor:_}),Object(h.jsx)("div",{className:"mt-5 d-flex justify-content-center",children:Object(h.jsx)("div",{className:"".concat(X.a.userCard," p-3"),children:Object(h.jsxs)("div",{className:"d-flex",children:[Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:""===s.image?"https://www.watershed.co.uk/engage/wp-content/uploads/2010/08/blank-profile.jpg":"http://localhost:5000/"+s.image,alt:"...",className:X.a.userCardImg})}),Object(h.jsxs)("div",{style:{marginTop:"15px"},className:"ml-3",children:[Object(h.jsx)("h2",{children:s.username}),Object(h.jsx)("p",{className:X.a.bio,children:s.bio}),Object(h.jsx)("h6",{children:"Interests"}),Object(h.jsx)("p",{children:s.interests}),Object(h.jsx)("button",{style:_?{visibility:"hidden"}:{visibility:"visible",marginTop:"16px",marginRight:"20px"},className:"btn btn-outline-dark","data-toggle":"modal","data-target":"#exampleModalCenter",children:"Edit"}),Object(h.jsx)("button",{style:_?{visibility:"hidden"}:{visibility:"visible",marginTop:"16px"},className:"btn btn-outline-dark","data-toggle":"modal","data-target":"#exampleModalCenter2",children:"Change Profile Picture"})]})]})})}),Object(h.jsx)("div",{className:"modal fade",id:"exampleModalCenter",children:Object(h.jsx)("div",{className:"modal-dialog",children:Object(h.jsxs)("div",{className:"modal-content",children:[Object(h.jsx)("div",{className:"modal-header",children:Object(h.jsx)("h5",{className:"modal-title",children:"Edit Your Profile"})}),Object(h.jsxs)("div",{className:"modal-body",children:[Object(h.jsx)("label",{children:Object(h.jsx)("b",{children:"Interests"})}),Object(h.jsx)("input",{onChange:C,name:"interests",value:s.interests,className:"form-control"})]}),Object(h.jsxs)("div",{className:"modal-body",children:[Object(h.jsx)("label",{children:Object(h.jsx)("b",{children:"Add Bio"})}),Object(h.jsx)("textarea",{onChange:C,name:"bio",value:s.bio,className:"form-control",rows:"2"})]}),Object(h.jsxs)("div",{className:"modal-footer",children:[Object(h.jsx)("button",{type:"button",onClick:I,className:"btn btn-outline-dark","data-dismiss":"modal",children:"Done"}),Object(h.jsx)("button",{type:"button",className:"btn btn-outline-dark","data-dismiss":"modal",children:"Close"})]})]})})}),Object(h.jsx)("div",{className:"modal fade",id:"exampleModalCenter2",children:Object(h.jsx)("div",{className:"modal-dialog",children:Object(h.jsxs)("div",{className:"modal-content",children:[Object(h.jsx)("div",{className:"modal-header",children:Object(h.jsx)("h5",{className:"modal-title",children:"Change Your Profile Picture"})}),Object(h.jsxs)("div",{className:"modal-body",children:[Object(h.jsx)("label",{style:{marginLeft:"7px"},children:Object(h.jsx)("b",{children:"Upload Profile Picture"})}),Object(h.jsx)("input",{type:"file",multiple:!0,name:"image",onChange:function(e){console.log(s.bio),i((function(t){return Object(r.a)(Object(r.a)({},t),{},{image:e.target.files[0]})}))}})]}),Object(h.jsx)("div",{className:"modal-body",children:Object(h.jsx)("button",{type:"button",onClick:function(){i((function(e){return Object(r.a)(Object(r.a)({},e),{},{image:""})}))},className:"btn btn-outline-dark",children:"Remove Profile Picture"})}),Object(h.jsxs)("div",{className:"modal-footer",children:[Object(h.jsx)("button",{type:"button",onClick:I,className:"btn btn-outline-dark","data-dismiss":"modal",children:"Done"}),Object(h.jsx)("button",{type:"button",className:"btn btn-outline-dark","data-dismiss":"modal",children:"Close"})]})]})})}),Object(h.jsx)("div",{style:{marginTop:"50px"},children:b.slice(0).reverse().map((function(e,t){return Object(h.jsx)(D,{id:e._id,uID:e.user_id,title:e.title,btnTitle:"Read More",content:e.content,author:e.author_name,date:e.date,image:e.image},t)}))})]})},Q=a(50),ee=a.n(Q);var te=function(e){return Object(h.jsx)("div",{children:Object(h.jsx)(N.a,{left:!0,children:Object(h.jsx)("div",{className:ee.a.singleDayCard,style:{width:"18rem",borderRadius:"7px",margin:"16px"},children:Object(h.jsxs)("div",{className:"card-body",children:[Object(h.jsx)("h5",{children:e.title}),Object(h.jsx)("p",{children:e.date}),Object(h.jsx)("button",{type:"button",onClick:function(){e.onRead(e.id)},className:"btn btn-outline-dark","data-toggle":"modal","data-target":"#exampleModalCenter",children:"Read More"}),Object(h.jsx)("button",{style:{margin:"16px"},className:"btn btn-outline-dark",onClick:function(){e.onDelete(e.id)},children:"Delete"})]})})})})};var ae=function(e){var t=Object(u.e)(),a=Object(n.useState)(""),c=Object(o.a)(a,2),s=c[0],l=c[1],r=Object(n.useState)(""),i=Object(o.a)(r,2),j=i[0],m=i[1],b=Object(n.useState)(""),O=Object(o.a)(b,2),g=O[0],p=O[1],x=Object(n.useState)([]),v=Object(o.a)(x,2),N=v[0],y=v[1];function _(e){var t=localStorage.getItem("userData");if(t){var a={headers:{Authorization:"Bearer "+JSON.parse(t).token}};d.a.delete("".concat("http://localhost:5000/","diary/day/delete/").concat(e),a).then((function(e){console.log(e)})),y((function(t){return N.filter((function(t,a){return a!==e}))}))}}function S(e){var t=localStorage.getItem("userData");if(t){var a={headers:{Authorization:"Bearer "+JSON.parse(t).token}};d.a.get("".concat("http://localhost:5000/","diary/").concat(e),a).then((function(e){l(e.data.title),m(e.data.content),p(e.data.date)}))}}return Object(n.useEffect)((function(){var a=localStorage.getItem("userData");if(a){var n={headers:{Authorization:"Bearer "+JSON.parse(a).token}};d.a.get("".concat("http://localhost:5000/","diary/alldays"),n).then((function(t){y((function(){return t.data.days.filter((function(t){return t.user_id===e.uID}))}))})).catch((function(e){console.log(e.response.status),t.push("/login")}))}else t.push("/login")})),Object(h.jsxs)("div",{children:[Object(h.jsx)(f,{hOption3:"Home"}),Object(h.jsx)(T,{userId:e.uID,userName:e.uName,uToken:e.uToken,isImg:!1}),Object(h.jsx)("div",{className:"row",style:{margin:"25px 50px"},children:N.slice(0).reverse().map((function(e,t){return Object(h.jsx)(te,{id:e._id,onRead:S,onDelete:_,title:e.title,btnTitle:"Delete",content:e.content,date:e.date},t)}))}),Object(h.jsx)("div",{className:"modal fade",id:"exampleModalCenter",children:Object(h.jsx)("div",{className:"modal-dialog",children:Object(h.jsxs)("div",{className:"modal-content",children:[Object(h.jsx)("div",{className:"modal-header",children:Object(h.jsx)("h5",{className:"modal-title",children:s})}),Object(h.jsx)("div",{className:"modal-body",children:g}),Object(h.jsx)("div",{className:"modal-body",children:j}),Object(h.jsx)("div",{className:"modal-footer",children:Object(h.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",children:"Close"})})]})})})]})};var ne=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(""),l=Object(o.a)(s,2),r=l[0],i=l[1],d=Object(n.useState)(""),m=Object(o.a)(d,2),b=m[0],p=m[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("userData");if(e){var t=JSON.parse(e);p(t.token),c(t.user._id),i(t.user.username)}}),[]),Object(h.jsxs)(j.a,{children:[Object(h.jsx)(u.a,{path:"/",exact:!0,children:Object(h.jsx)(G,{})}),Object(h.jsx)(u.a,{path:"/landingPage",exact:!0,children:Object(h.jsx)(G,{})}),Object(h.jsx)(u.a,{path:"/signup",exact:!0,children:Object(h.jsx)(O,{})}),Object(h.jsx)(u.a,{path:"/login",exact:!0,children:Object(h.jsx)(g,{getUser:function(e,t,a){i(t),c(e),p(a)}})}),Object(h.jsx)(u.a,{path:"/memories",exact:!0,children:Object(h.jsx)(z,{uID:a,uName:r,uToken:b})}),Object(h.jsx)(u.a,{path:"/myMemories",exact:!0,children:Object(h.jsx)(K,{exact:!0,component:K,uID:a,uToken:b})}),Object(h.jsx)(u.a,{path:"/myDiary",exact:!0,children:Object(h.jsx)(ae,{uID:a,uToken:b})}),Object(h.jsx)(u.a,{path:"/fullMemory",exact:!0,children:Object(h.jsx)(Y,{uID:a,uName:r,uToken:b})}),Object(h.jsx)(u.a,{path:"/user",exact:!0,children:Object(h.jsx)(Z,{uID:a,uName:r,uToken:b})})]})};s.a.render(Object(h.jsx)(ne,{}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.204dd826.chunk.js.map